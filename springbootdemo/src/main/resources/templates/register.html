<!DOCTYPE html>
<html lang="en">
<!--<head>-->
    <!--<meta charset="UTF-8">-->
    <!--&lt;!&ndash; 新 Bootstrap 核心 CSS 文件 &ndash;&gt;-->
    <!--<title>Thymeleaf of First</title>-->
    <!--<link th:href="@{css/hello.css}" href="../static/css/hello.css" rel="stylesheet">-->
<!--</head>-->

<script src="/js/jquery-3.4.1.min.js"></script>
<body>
<p>注册</p>
<!--<img th:src="@{/niuniu.jpg}"/>-->

<table class="table">
    <tr>
        <th>用户名</th>
        <th><input id="email" type="text" placeholder="请输入邮箱" /></th>
    </tr>

    <tr>
        <th>密码</th>
        <th><input id="pwd" type="password" placeholder="请输入密码" /></th>
    </tr>
    <tr>
        <th>确认密码</th>
        <th><input id="rePwd" type="password" placeholder="请再次输入密码" /></th>
    </tr>

</table>
<span><button type="button" onclick="register()">注册</button></span>
<span><button type="button" onclick="login()">去登录</button></span>

</body>

<script>
    //登录
    function register(){
        var adata = {
            "email" : document.getElementById("email").value,
            "pwd" : document.getElementById("pwd").value,
            "rePwd" : document.getElementById("rePwd").value
        };
        var data = JSON.stringify(adata);
        $.ajax({
            type : "POST",
            dataType: "json",//通过GET方式上传请求
            contentType : "application/json",//上传内容格式为json结构
            data : data,                                 //上传的参数
            async: false ,
            url : "/user/register",     //请求的url。与后端@Request Mapping注解中的值一致。
            success : function(data) {          //请求成功的回调函数
                if (data.code === 200){
                    alert("成功");
                    window.location.href = "index";
                } else {
                    alert(data.msg);
                }
            },
            error : function(e) {           //请求失败的回调函数
                console.log(e);
            }
        });
    };
    function login(){
        window.location.href = "index";
    };

</script>

</html>
